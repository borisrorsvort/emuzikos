= form_for @user, :html => { :multipart => true } do |f|
  = f.error_messages

  %h3= t(:"location", :scope => :users)
  .field
    %p
      = f.label :zip, t(:'activerecord.attributes.user.zip')
      = f.text_field :zip
    %p
      = f.label :country, t(:'activerecord.attributes.user.country')
      = country_select :user, :country, nil, {}, { :class => 'chosen' }
  %h3= t(:'activerecord.attributes.user.avatar')
  .field
    - if @user.avatar.present?
      .avatar.small
        = image_tag @user.avatar.url(:gallery)
    = f.file_field :avatar
    .clear

  %h3= t(:"musician_infos", :scope => :users)

  .field
    %p.checkbox_set
      = f.label :visible, t(:'activerecord.attributes.user.visible')
      %br
      = t(:"visible_explanation", :scope => [:users, :edit])
      %br
      = f.label "visible_true", t(:"activerecord.attributes.user.visible")
      = radio_button(:user, :visible, true)
      = f.label "visible_false", t(:"activerecord.attributes.user.invisible")
      = radio_button(:user, :visible, false)


    %p.checkbox_set
      = f.label :user_type, t(:'activerecord.attributes.user.user_type')

      - User::USER_TYPES.each do |user_type|
        = radio_button(:user, :user_type, user_type)
        = f.label "user_type_" + user_type, t(:"users.types.#{user_type}")
    %p
      = f.label :instruments, t(:'activerecord.attributes.user.instruments')
      %i= t(:"instruments_in_band_notice", :scope => [:users, :edit])
      = collection_select(:user, :instrument_ids, @instruments, :id, :translated_name, {}, {:multiple => true, :name=>'user[instrument_ids][]', :class => "chosen multiple_select"})
    .clear
    %p
      %br
      %i= t(:'form_helpers.instrument_not_in_list', :scope => [:users, :edit])
      %a{:class => "feedback_link", :href =>"javascript:UserVoice.showPopupWidget();", :title => t(:'form_helpers.request_through_dashboard', :scope => [:users, :edit])}
        = t(:"form_helpers.request_through_dashboard", :scope => [:users, :edit])
    %p
      = f.label :genre, t(:'activerecord.attributes.user.genre')
      = collection_select(:user, :genre_ids, @genres, :id, :translated_name, {}, {:multiple => true, :name=>'user[genre_ids][]', :class => "chosen multiple_select"})
    .clear
    %p
      %br
      %i= t(:"form_helpers.genre_not_on_list", :scope => [:users, :edit])
      %a{:class => "feedback_link", :href =>"javascript:UserVoice.showPopupWidget();", :title => t(:'form_helpers.request_through_dashboard', :scope => [:users, :edit])}= t(:'form_helpers.request_through_dashboard', :scope => [:users, :edit])
    %p
      = f.label :searching_for, t(:'activerecord.attributes.user.searching_for')
      = select(:user, :searching_for, grouped_options_for_select(searching_for_grouped_options, @user.searching_for ))

    %p
      = f.label :references, t(:'activerecord.attributes.user.references')
      = f.text_field :references, :size => 60

    %p
      = f.label :request_message, t(:'activerecord.attributes.user.request_message')
      = f.text_area :request_message, :size => "45x20"
      .notification.info= t(:'form_helpers.personal_infos_advice', :scope => [:users, :edit])

  .clear

  %h3= t(:'medias', :scope => [:users, :edit])
  .field
    %p
      = f.label :songkick_username, t(:'activerecord.attributes.user.songkick_username')
      = f.text_field :songkick_username, :placeholder => "Example: Lady Gaga"
      %i #{t(:'form_helpers.dont_have_a_service_account', :service => "Songkick", :scope => [:users, :edit])} #{ link_to t(:'buttons.create_one_here'), "http://www.songkick.com/signup" }
    %p
      = f.label :soundcloud_username, t(:'activerecord.attributes.user.soundcloud_username')
      = f.text_field :soundcloud_username, :placeholder => "Example: john-doe"
      %i #{t(:'form_helpers.dont_have_a_service_account', :service => "Soundcloud", :scope => [:users, :edit])} #{ link_to t(:'buttons.create_one_here'), "http://www.soundcloud.com/" }
    %p
      = f.label :youtube_video_id, t(:'activerecord.attributes.user.youtube_video_id')
      = f.text_field :youtube_video_id, :placeholder => "Example: JW5meKfy3fY"
      %i #{t(:'form_helpers.dont_find_youtube_video_id', :scope => [:users, :edit])} #{ link_to t(:'buttons.click_here_for_help'), "#", "data-reveal-id" => "youtube_video_id_help" }
      %i #{t(:'form_helpers.dont_have_a_service_account', :service => "Youtube", :scope => [:users, :edit])} #{ link_to t(:'buttons.create_one_here'), "http://www.youtube.com/" }
  .clear

  = f.submit t(:'buttons.update'), :type => "submit", :class => "button submit"

#youtube_video_id_help.reveal-modal
  %section
    %header
      %h1= t(:'youtube_video_id_help.title', :scope => [:users, :edit])
  %ol
    %li
      = t(:'youtube_video_id_help.steps.first', :scope => [:users, :edit])
    %li
      %p= t(:'youtube_video_id_help.steps.second', :scope => [:users, :edit])
      %p= image_tag "reveal/youtube/url-example.jpg", :alt => "youtube url example"
    %li
      = t(:'youtube_video_id_help.steps.third', :scope => [:users, :edit])
    %li
      = t(:'youtube_video_id_help.steps.fourth', :scope => [:users, :edit])

  %a.close-reveal-modal Ã—